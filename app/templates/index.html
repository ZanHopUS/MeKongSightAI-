<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mekong Sight AI - Gi√°m s√°t N√¥ng nghi·ªáp Th√¥ng minh</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>

    <div id="login-container" class="login-wrapper">
        <div class="login-content">
            <div class="intro-section">
                <div class="brand">
                    <i class="fas fa-leaf"></i> MEKONG SIGHT AI
                </div>
                <h1>Gi·∫£i ph√°p N√¥ng nghi·ªáp s·ªë<br>cho ng∆∞·ªùi d√¢n ƒêBSCL</h1>
                <p class="tagline">Gi√°m s√°t m√¥i tr∆∞·ªùng L√∫a - T√¥m - C√° 24/7 c√πng Tr·ª£ l√Ω AI ch·∫©n ƒëo√°n b·ªánh t·ª©c th·ªùi.</p>

                <div class="features-list">
                    <div class="feature-item">
                        <i class="fas fa-satellite-dish"></i>
                        <div>
                            <strong>Gi√°m s√°t IoT</strong>
                            <span>ƒêo ƒë·ªô m·∫∑n, pH, nhi·ªát ƒë·ªô, m·ª±c n∆∞·ªõc t·ª± ƒë·ªông.</span>
                        </div>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-robot"></i>
                        <div>
                            <strong>AI Vision</strong>
                            <span>Ch·ª•p ·∫£nh ƒë·ªÉ ph√°t hi·ªán b·ªánh tr√™n c√¢y tr·ªìng v·∫≠t nu√¥i.</span>
                        </div>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-cloud-sun-rain"></i>
                        <div>
                            <strong>L·ªãch v·ª• th√¥ng minh</strong>
                            <span>C·∫≠p nh·∫≠t th·ªùi ti·∫øt v√† th·ªßy tri·ªÅu theo th·ªùi gian th·ª±c.</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="login-box">
                    <h2>ƒêƒÉng Nh·∫≠p</h2>
                    <p>Vui l√≤ng nh·∫≠p th√¥ng tin t√†i kho·∫£n c·ªßa b·∫°n</p>

                    <div class="input-group">
                        <i class="fas fa-user"></i>
                        <input type="text" id="username" placeholder="T√†i kho·∫£n (VD: user1)">
                    </div>
                    <div class="input-group">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="password" placeholder="M·∫≠t kh·∫©u">
                    </div>

                    <div id="login-error" class="error-msg">
                        <i class="fas fa-exclamation-circle"></i> <span>Sai t√†i kho·∫£n ho·∫∑c m·∫≠t kh·∫©u!</span>
                    </div>

                    <button class="btn-primary" onclick="handleLogin()">
                        Truy c·∫≠p H·ªá th·ªëng <i class="fas fa-arrow-right"></i>
                    </button>

                    <div class="support-text">Hotline h·ªó tr·ª£: 0909.xxx.xxx</div>
                </div>
            </div>
        </div>
    </div>

    <div id="main-app" class="app-container" style="display: none;">

        <aside class="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-leaf logo-icon"></i>
                <div class="user-info">
                    <h3 id="display-name">Xin ch√†o, User</h3>
                    <span class="status-badge"><span class="dot"></span> Online</span>
                </div>
            </div>

            <nav class="nav-menu">
                <a href="#" class="nav-link active" onclick="switchPage('monitor')" id="nav-monitor">
                    <i class="fas fa-chart-line"></i> <span>Gi√°m s√°t</span>
                </a>
                <a href="#" class="nav-link" onclick="switchPage('weather')" id="nav-weather">
                    <i class="fas fa-calendar-alt"></i> <span>L·ªãch v·ª•</span>
                </a>
                <a href="#" class="nav-link" onclick="switchPage('ai')" id="nav-ai">
                    <i class="fas fa-brain"></i> <span>Tr·ª£ l√Ω AI</span>
                </a>
                <a href="#" class="nav-link logout" onclick="handleLogout()">
                    <i class="fas fa-sign-out-alt"></i> <span>ƒêƒÉng xu·∫•t</span>
                </a>
            </nav>
        </aside>

        <main class="content-area">

            <section id="page-monitor" class="page-section active">

                <div class="section-header">
                    <h2>Gi√°m s√°t M√¥i tr∆∞·ªùng</h2>
                    <span class="date-now" id="current-date">--/--/----</span>
                </div>

                <div class="card ai-summary-card" style="margin-bottom: 20px;">
                    <div class="card-title">ü§ñ ƒê√°nh gi√° hi·ªán t·∫°i</div>
                    <h3 id="ai-status-text" style="margin-bottom: 10px;">ƒêang ph√¢n t√≠ch...</h3>
                    <ul id="ai-reasons"></ul>
                    <ul id="ai-advice" style="margin-top: 5px; font-weight: 500;"></ul>
                </div>

                <div class="dashboard-grid">
                    <div class="card gauge-card">
                        <div class="card-title">ƒê·ªô m·∫∑n (Salinity)</div>
                        <div class="gauge-container">
                            <div class="gauge-body">
                                <div class="gauge-fill"></div>
                                <div class="gauge-cover"></div>
                                <div class="gauge-needle" id="gauge-needle"></div>
                            </div>
                            <div class="gauge-value" id="val-sal">0.0</div>
                            <div class="gauge-unit">Ph·∫ßn ngh√¨n (‚Ä∞)</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-title">üïí Nh·∫≠t k√Ω s·ª± ki·ªán</div>
                        <div class="event-toolbar">
                            <button class="btn-outline" onclick="clearEventLog()">X√≥a nh·∫≠t k√Ω</button>
                            <span class="muted" id="event-count">0 s·ª± ki·ªán</span>
                        </div>
                        <ul id="event-log" class="event-log"></ul>
                    </div>

                    <div class="card">
                        <div class="card-title">üìå G·ª£i √Ω nhanh</div>
                        <ul class="quick-tips">
                            <li>‚úî Theo d√µi ƒë·ªô m·∫∑n l√∫c tri·ªÅu c∆∞·ªùng.</li>
                            <li>‚úî Kh√¥ng l·∫•y n∆∞·ªõc khi v∆∞·ª£t ng∆∞·ª°ng > 4‚Ä∞.</li>
                            <li>‚úî So s√°nh d·ªØ li·ªáu theo ng√†y ƒë·ªÉ th·∫•y xu h∆∞·ªõng.</li>
                        </ul>
                    </div>

                    <div class="metrics-container">
                        <div class="card metric-card temp">
                            <div class="icon"><i class="fas fa-temperature-high"></i></div>
                            <div>
                                <div class="label">Nhi·ªát ƒë·ªô</div>
                                <div class="value" id="val-temp">-- ¬∞C</div>
                            </div>
                        </div>
                        <div class="card metric-card ph">
                            <div class="icon"><i class="fas fa-flask"></i></div>
                            <div>
                                <div class="label">ƒê·ªô pH</div>
                                <div class="value" id="val-ph">--</div>
                            </div>
                        </div>
                        <div class="card metric-card water">
                            <div class="icon"><i class="fas fa-water"></i></div>
                            <div>
                                <div class="label">M·ª±c n∆∞·ªõc</div>
                                <div class="value" id="val-water">-- cm</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card full-width-chart">
                    <div class="chart-header">
                        <div class="card-title">üìà Xu h∆∞·ªõng ƒë·ªô m·∫∑n theo th·ªùi gian</div>
                        <div class="chart-range">
                            <button class="range-btn active" onclick="changeRange('24h')">24h</button>
                            <button class="range-btn" onclick="changeRange('7d')">7 ng√†y</button>
                            <button class="range-btn" onclick="changeRange('30d')">1 th√°ng</button>
                        </div>
                    </div>
                    <div class="chart-container-box">
                        <canvas id="salinityChart"></canvas>
                    </div>
                </div>
            </section>

            <section id="page-weather" class="page-section">
                <div class="section-header">
                    <h2>L·ªãch v·ª• & Th·ªùi ti·∫øt</h2>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-title">üìç Th·ªùi ti·∫øt hi·ªán t·∫°i</div>
                        <div style="text-align: center; margin-top: 10px;">
                            <h1 id="weather-temp" style="font-size: 3rem; color: var(--text-main);">--¬∞C</h1>
                            <p id="weather-desc" style="font-size: 1.2rem; color: var(--text-light);">--</p>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-title">üåä Th·ªßy tri·ªÅu h√¥m nay</div>
                        <div style="text-align: center; margin-top: 10px;">
                            <h2 id="tide-level" style="font-size: 2rem; color: var(--secondary);">--</h2>
                            <p id="tide-advice" style="font-weight: 600; margin-top: 5px;">--</p>
                        </div>
                    </div>
                </div>

                <div class="card full-width-chart">
                    <div class="card-title">üå°Ô∏è D·ª± b√°o Nhi·ªát ƒë·ªô (7 ng√†y t·ªõi)</div>
                    <div class="chart-container-box">
                        <canvas id="tempChart"></canvas>
                    </div>
                </div>

                <div class="card full-width-chart">
                    <div class="card-title">üåä D·ª± b√°o M·ª±c tri·ªÅu</div>
                    <div class="chart-container-box">
                        <canvas id="tideChart"></canvas>
                    </div>
                </div>
            </section>

            <section id="page-ai" class="page-section">
                <div class="section-header">
                    <h2>Tr·ª£ l√Ω AI Ch·∫©n ƒëo√°n</h2>
                </div>

                <div class="ai-container">
                    <div class="card ai-upload-card">
                        <div class="ai-icon-wrapper"><i class="fas fa-robot"></i></div>
                        <h3>B√°c sƒ© N√¥ng nghi·ªáp AI</h3>
                        <p>Ch·ª•p ·∫£nh L√∫a, T√¥m, C√° ƒë·ªÉ ph√°t hi·ªán b·ªánh s·ªõm.</p>

                        <button class="btn-primary btn-camera"
                            onclick="document.getElementById('camera-input').click()">
                            <i class="fas fa-camera"></i> Ch·ª•p ·∫£nh / T·∫£i ·∫£nh l√™n
                        </button>
                        <input type="file" id="camera-input" accept="image/*" hidden onchange="uploadImage()">
                    </div>

                    <div id="ai-result" class="card ai-result-card" style="display: none;">
                        <img id="preview-img" src="" alt="·∫¢nh ph√¢n t√≠ch">
                        <div class="ai-analysis">
                            <h3 id="ai-status">ƒêang ph√¢n t√≠ch...</h3>
                            <div class="solution-box">
                                <strong><i class="fas fa-user-md"></i> L·ªùi khuy√™n:</strong>
                                <p id="ai-solution">...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <div class="mobile-nav">
            <div class="mobile-item active" onclick="switchPage('monitor')" id="mob-monitor"><i
                    class="fas fa-chart-line"></i></div>
            <div class="mobile-item" onclick="switchPage('weather')" id="mob-weather"><i
                    class="fas fa-calendar-alt"></i></div>
            <div class="mobile-item center-btn" onclick="switchPage('ai')" id="mob-ai"><i class="fas fa-camera"></i>
            </div>
            <div class="mobile-item" onclick="handleLogout()"><i class="fas fa-sign-out-alt"></i></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/static/js/script.js"></script>
</body>

</html>